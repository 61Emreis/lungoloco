<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <title>Lungoloco - Quiz</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <style>
      body{background:linear-gradient(rgba(0,0,0,.4),rgba(0,0,0,.4)),url(arka-plan.png);color:#f0f0f0;background-size:cover}
      header h1,footer{color:#00d1b2;margin:0;font-weight:700}
      nav a{color:#f0f0f0;text-decoration:none;margin-left:1.5rem;font-weight:bold;transition:color .3s}
      nav a:hover{color:#00d1b2}
      .info{text-align:center;font-weight:700;margin-top:.5rem;color:#ffca28}
      .quiz-selection{text-align:center;margin:2rem auto 1rem}
      .quiz-selection h2{margin-bottom:1rem;font-size:1.8rem}
      .quiz-selection button{background:#00d1b2;color:#003366;font-weight:700;padding:.75rem 1.5rem;border-radius:8px;border:none;cursor:pointer;margin:.5rem;transition:background .3s,transform .2s}
      .quiz-selection button:hover{background:#007a71;transform:translateY(-2px)}
      .quiz-container{flex:1;max-width:600px;margin:1rem auto;background:#003f5f;padding:2rem;border-radius:16px;box-shadow:0 6px 16px rgba(0,0,0,.3);display:none}
      .timer{text-align:right;font-size:1.2rem;margin-bottom:1rem}
      .question{text-align:center;font-size:1.6rem;margin-bottom:1.5rem}
      .options{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:1rem}
      .option{background:#00d1b2;color:#003366;padding:.75rem 1rem;border:none;border-radius:10px;font-size:1rem;cursor:pointer;transition:background .3s,transform .2s}
      .option:hover{background:#005377;transform:translateY(-2px)}
      .option:disabled{opacity:.6;cursor:default}
      .feedback{text-align:center;font-size:1.2rem;height:1.5rem;margin-bottom:1rem}
      .feedback.correct{color:#8bc34a}.feedback.wrong{color:#f44336}
      .result{text-align:center;font-size:1.5rem;margin-top:2rem}
      footer{text-align:center;color:#b0bec5}
    </style>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
      import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
      import { getDatabase, ref, get, update } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

      const firebaseConfig={apiKey:"AIzaSyDrE4teIGAHWsqrx_CjWIoqeb2tSWphyY8",authDomain:"lungoloco-b1005.firebaseapp.com",projectId:"lungoloco-b1005",storageBucket:"lungoloco-b1005.firebasestorage.app",messagingSenderId:"325454308006",appId:"1:325454308006:web:44149848db69002cc8ca67",measurementId:"G-R20ZS0WN7X"};
      const app=initializeApp(firebaseConfig);
      const auth=getAuth(app);
      const db=getDatabase(app);

            window.loginUser=()=>{window.location.href="auth.html";return false};
    window.logoutUser = () => {
  signOut(auth).then(() => (window.location.href = "auth.html"));
  return false;
};


      /* ---------- Soru havuzu ---------- */
      const questions = [
          { en: "Pen", opts: ["Kalem", "Silgi", "Defter"], correct: "Kalem" },
          { en: "Apple", opts: ["Elma", "Armut", "ÃœzÃ¼m"], correct: "Elma" },
          { en: "Car", opts: ["Araba", "Ev", "Kitap"], correct: "Araba" },
          { en: "Dog", opts: ["KÃ¶pek", "Kedi", "Fare"], correct: "KÃ¶pek" },
          { en: "Table", opts: ["Masa", "Sandalye", "KapÄ±"], correct: "Masa" },
          { en: "Sun", opts: ["GÃ¼neÅŸ", "Ay", "YÄ±ldÄ±z"], correct: "GÃ¼neÅŸ" },
          { en: "Window", opts: ["Pencere", "Duvar", "Zemin"], correct: "Pencere" },
          { en: "Book", opts: ["Kitap", "Kalem", "KaÄŸÄ±t"], correct: "Kitap" },
          { en: "Bag", opts: ["Ã‡anta", "Kutu", "Bardak"], correct: "Ã‡anta" },
          { en: "Phone", opts: ["Telefon", "Bilgisayar", "Tablet"], correct: "Telefon" },
          { en: "Chair", opts: ["Sandalye", "Tablet", "Saat"], correct: "Sandalye" },
          { en: "Computer", opts: ["Bilgisayar", "Ã‡atal", "KaÅŸÄ±k"], correct: "Bilgisayar" },
          { en: "Door", opts: ["KapÄ±", "BuzdolabÄ±", "Pantolon"], correct: "KapÄ±" },
          { en: "Tree", opts: ["AÄŸaÃ§", "Tablet", "Kitap"], correct: "AÄŸaÃ§" },
          { en: "Bird", opts: ["KuÅŸ", "KÃ¶pek", "Kutu"], correct: "KuÅŸ" },
          { en: "Bottle", opts: ["ÅžiÅŸe", "Ã‡anta", "Ev"], correct: "ÅžiÅŸe" },
          { en: "Spoon", opts: ["KaÅŸÄ±k", "Ã‡atal", "BÄ±Ã§ak"], correct: "KaÅŸÄ±k" },
          { en: "Fork", opts: ["Ã‡atal", "Åžeker", "Kitap"], correct: "Ã‡atal" },
          { en: "Knife", opts: ["BÄ±Ã§ak", "Ã‡atal", "Kutu"], correct: "BÄ±Ã§ak" },
          { en: "School", opts: ["Okul", "Orman", "GÃ¶l"], correct: "Okul" },
          { en: "Student", opts: ["Ã–ÄŸrenci", "YÄ±ldÄ±z", "Top"], correct: "Ã–ÄŸrenci" },
          { en: "Teacher", opts: ["Ã–ÄŸretmen", "KapÄ±", "Bardak"], correct: "Ã–ÄŸretmen" },
          { en: "Fish", opts: ["BalÄ±k", "Ev", "Elma"], correct: "BalÄ±k" },
          { en: "Milk", opts: ["SÃ¼t", "Kutu", "Masa"], correct: "SÃ¼t" },
          { en: "Bread", opts: ["Ekmek", "Kitap", "Kahve"], correct: "Ekmek" },
          { en: "Cheese", opts: ["Peynir", "Ã‡ay", "Yatak"], correct: "Peynir" },
          { en: "Clock", opts: ["Saat", "Bilgisayar", "Åžeker"], correct: "Saat" },
          { en: "Shirt", opts: ["GÃ¶mlek", "Ã‡anta", "Ã‡ay"], correct: "GÃ¶mlek" },
          { en: "Shoes", opts: ["AyakkabÄ±", "Yatak", "BuzdolabÄ±"], correct: "AyakkabÄ±" },
          { en: "Pants", opts: ["Pantolon", "Telefon", "Kutu"], correct: "Pantolon" },
          { en: "Bed", opts: ["Yatak", "Ev", "KaÅŸÄ±k"], correct: "Yatak" },
          { en: "Pillow", opts: ["YastÄ±k", "Defter", "Ã‡atal"], correct: "YastÄ±k" },
          { en: "Notebook", opts: ["Defter", "ÅžiÅŸe", "KapÄ±"], correct: "Defter" },
          { en: "Lamp", opts: ["Lamba", "Balon", "Ev"], correct: "Lamba" },
          { en: "Picture", opts: ["Resim", "Bardak", "Kutu"], correct: "Resim" },
          { en: "Mirror", opts: ["Ayna", "Bardak", "Tablet"], correct: "Ayna" },
          { en: "Ball", opts: ["Top", "Silgi", "Mikrodalga"], correct: "Top" },
          { en: "Watch", opts: ["Saat", "Televizyon", "KapÄ±"], correct: "Saat" },
          { en: "Glasses", opts: ["GÃ¶zlÃ¼k", "Ã‡ay", "Pasta"], correct: "GÃ¶zlÃ¼k" },
          { en: "Hat", opts: ["Åžapka", "BalÄ±k", "Kalem"], correct: "Åžapka" },
          { en: "Television", opts: ["Televizyon", "Meyve suyu", "Yatak"], correct: "Televizyon" },
          { en: "Radio", opts: ["Radyo", "BÄ±Ã§ak", "GÃ¶l"], correct: "Radyo" },
          { en: "Fan", opts: ["VantilatÃ¶r", "Bardak", "Åžapka"], correct: "VantilatÃ¶r" },
          { en: "Heater", opts: ["IsÄ±tÄ±cÄ±", "Kedi", "KaÅŸÄ±k"], correct: "IsÄ±tÄ±cÄ±" },
          { en: "Refrigerator", opts: ["BuzdolabÄ±", "BalÄ±k", "KapÄ±"], correct: "BuzdolabÄ±" },
          { en: "Oven", opts: ["FÄ±rÄ±n", "Masa", "Ayna"], correct: "FÄ±rÄ±n" },
          { en: "Microwave", opts: ["Mikrodalga", "Ev", "Kedi"], correct: "Mikrodalga" },
          { en: "Toothbrush", opts: ["DiÅŸ fÄ±rÃ§asÄ±", "BÄ±Ã§ak", "Pantolon"], correct: "DiÅŸ fÄ±rÃ§asÄ±" },
          { en: "Toothpaste", opts: ["DiÅŸ macunu", "Yatak", "Kitap"], correct: "DiÅŸ macunu" },
          { en: "Soap", opts: ["Sabun", "Masa", "Tablet"], correct: "Sabun" },
          { en: "Towel", opts: ["Havlu", "Silgi", "Kitap"], correct: "Havlu" },
          { en: "Comb", opts: ["Tarak", "Ã‡anta", "Ã‡ikolata"], correct: "Tarak" },
          { en: "Shampoo", opts: ["Åžampuan", "Ev", "KapÄ±"], correct: "Åžampuan" },
          { en: "Camera", opts: ["Kamera", "Elma", "Ev"], correct: "Kamera" },
          { en: "Music", opts: ["MÃ¼zik", "Kutu", "Silgi"], correct: "MÃ¼zik" },
          { en: "Movie", opts: ["Film", "Araba", "Defter"], correct: "Film" },
          { en: "Game", opts: ["Oyun", "Bardak", "Armut"], correct: "Oyun" },
          { en: "Balloon", opts: ["Balon", "Telefon", "Åžeker"], correct: "Balon" },
          { en: "Cake", opts: ["Pasta", "Ev", "Tablet"], correct: "Pasta" },
          { en: "Ice Cream", opts: ["Dondurma", "KaÄŸÄ±t", "Kitap"], correct: "Dondurma" },
          { en: "Candy", opts: ["Åžeker", "Masa", "Ev"], correct: "Åžeker" },
          { en: "Chocolate", opts: ["Ã‡ikolata", "KapÄ±", "BuzdolabÄ±"], correct: "Ã‡ikolata" },
          { en: "Juice", opts: ["Meyve suyu", "Masa", "Silgi"], correct: "Meyve suyu" },
          { en: "Water", opts: ["Su", "Yatak", "Defter"], correct: "Su" },
          { en: "Coffee", opts: ["Kahve", "Kitap", "Ã‡anta"], correct: "Kahve" },
          { en: "Tea", opts: ["Ã‡ay", "Ã‡atal", "KaÅŸÄ±k"], correct: "Ã‡ay" },
          { en: "Train", opts: ["Tren", "Ev", "Kedi"], correct: "Tren" },
          { en: "Bus", opts: ["OtobÃ¼s", "Kalem", "Tablet"], correct: "OtobÃ¼s" },
          { en: "Airplane", opts: ["UÃ§ak", "Mikrodalga", "BalÄ±k"], correct: "UÃ§ak" },
          { en: "Boat", opts: ["Tekne", "Åžeker", "GÃ¶mlek"], correct: "Tekne" },
          { en: "Mountain", opts: ["DaÄŸ", "Saat", "Top"], correct: "DaÄŸ" },
          { en: "River", opts: ["Nehir", "GÃ¶l", "Ada"], correct: "Nehir" },
          { en: "Lake", opts: ["GÃ¶l", "Tablet", "Defter"], correct: "GÃ¶l" },
          { en: "Ocean", opts: ["Okyanus", "Telefon", "Ev"], correct: "Okyanus" },
          { en: "Beach", opts: ["Plaj", "KapÄ±", "Pencere"], correct: "Plaj" },
          { en: "Forest", opts: ["Orman", "Silgi", "Ã‡anta"], correct: "Orman" },
          { en: "Desert", opts: ["Ã‡Ã¶l", "Yatak", "Åžeker"], correct: "Ã‡Ã¶l" },
          { en: "Island", opts: ["Ada", "KapÄ±", "Ev"], correct: "Ada" },
        ];
// kÄ±saltÄ±lmÄ±ÅŸ Ã¶rnek
      function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}return arr}

      /* ---------- DOM ---------- */
      const info=document.getElementById("loginInfo");
      const startBtn=document.querySelector(".quiz-selection button");
      const selector=document.querySelector(".quiz-selection");
      const qc=document.getElementById("quizContainer");
      const timerE=document.getElementById("timer");
      const qE=document.getElementById("question");
      const optsD=document.getElementById("options");
      const fbE=document.getElementById("feedback");
      const resE=document.getElementById("result");

      let idx=0,score=0,timerId=null,loggedIn=false,currentUser=null;
               const loginLink  = document.getElementById("loginLink");
const logoutLink = document.getElementById("logoutLink");

const toggleAuthLinks = (loggedIn) => {
  loginLink.style.display  = loggedIn ? "none" : "inline-block";
  logoutLink.style.display = loggedIn ? "inline-block" : "none";
};
      onAuthStateChanged(auth,(user)=>{
          toggleAuthLinks(!!user); 
        loggedIn=!!user;
        currentUser=user;
        info.textContent=loggedIn?"":"ðŸ›ˆ GiriÅŸ yapmadÄ±ÄŸÄ±nÄ±z iÃ§in puanlar hesabÄ±nÄ±za eklenmez.";
      });

      startBtn.onclick=()=>{selector.style.display="none";qc.style.display="block";shuffle(questions);idx=0;score=0;showQ();};

      function showQ(){clearInterval(timerId);fbE.textContent="";const q=questions[idx];qE.textContent=q.en;optsD.innerHTML="";shuffle([...q.opts]).forEach(o=>{const b=document.createElement("button");b.className="option";b.textContent=o;b.onclick=()=>choose(o);optsD.appendChild(b)});startTimer();}
      function startTimer(){let t=15;timerE.textContent=`Zaman: ${t}s`;timerId=setInterval(()=>{t--;timerE.textContent=`Zaman: ${t}s`;if(t<=0){clearInterval(timerId);choose(null);}},1000);}
      async function choose(ans){clearInterval(timerId);document.querySelectorAll(".option").forEach(b=>b.disabled=true);const q=questions[idx];const correct=ans===q.correct;fbE.textContent=correct?`DoÄŸru!${loggedIn?" +10 puan":" (Puan eklenmedi)"}`:`YanlÄ±ÅŸ! DoÄŸru: ${q.correct}`;fbE.className=`feedback ${correct?"correct":"wrong"}`;if(correct) score+=10;if(correct&&loggedIn){const uRef=ref(db,`users/${currentUser.uid}`);const snap=await get(uRef);const cur=snap.val()?.score||0;await update(uRef,{score:cur+10});}
        idx++;setTimeout(()=>{if(idx<questions.length)showQ();else finish();},1500);
      }
      function finish(){qc.style.display="none";resE.textContent=`Quiz bitti! Toplam puan: ${score}${loggedIn?"":" (giriÅŸ yapmadÄ±ÄŸÄ±nÄ±z iÃ§in kaydedilmedi)"}`;}
    </script>
  </head>
  <body>
    <header>
        <h1><a href="index.html" class="logo-link">Lungoloco</a></h1>
      <nav>
        <a href="index.html">Anasayfa</a>
        <a href="lesson.html">Dersler</a>
        <a href="quiz.html">Quiz</a>
        <a href="profile.html">Profil</a>
        <a href="sirala.html">SÄ±ralamalar</a>
             <!-- nav iÃ§inde -->
<a id="logoutLink" href="#" onclick="return logoutUser()">Ã‡Ä±kÄ±ÅŸ Yap</a>
<a id="loginLink"  href="#" onclick="return loginUser()">GiriÅŸ Yap</a>
      </nav>
    </header>

    <div class="info" id="loginInfo"></div>

    <section class="quiz-selection">
      <h2>Kelime Quizâ€™i</h2>
      <button>BaÅŸla</button>
    </section>

    <section class="quiz-container" id="quizContainer">
      <div class="timer" id="timer">Zaman: 15s</div>
      <div class="question" id="question"></div>
      <div class="options" id="options"></div>
      <div class="feedback" id="feedback"></div>
    </section>

    <div class="result" id="result"></div>
  </body>
</html>
